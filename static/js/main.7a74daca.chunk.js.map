{"version":3,"sources":["components/HeaderComponent.js","utils/time.js","utils/words.js","components/TypingComponent.js","App.js","index.js"],"names":["HeaderComponent","id","href","React","Component","currentTime","Date","getTime","generateWords","n","Array","fill","map","_","faker","random","word","toLowerCase","join","TypingComponent","props","state","precision","previousText","nextText","window","currentChar","charAt","slice","errorText","wordCount","errors","keyPresses","startTime","wpm","accuracy","toFixed","handleKeyDown","bind","event","since","this","key","length","split","substring","setState","document","addEventListener","removeEventListener","mobileHelper","isMobile","className","Math","max","padStart","withSizes","width","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7a74daca.chunk.js","sourcesContent":["import React from 'react';\nexport default class HeaderComponent extends React.Component {\n    render () {\n        return (\n            <div id=\"header\">\n                <a href=\"/\"><h3>clacking.club</h3></a>\n            </div>\n        );\n    }\n}","export const currentTime = () => new Date().getTime();\n\nexport const timeDelta = (since) => (currentTime() - since) / (60*1000);","import faker from 'faker/locale/en_GB';\n\nexport default function generateWords(n = 10) {\n    return new Array(n).fill(\"\").map(_ => faker.random.word().toLowerCase()).join(\" \");\n}\n","import React from 'react';\nimport {currentTime, timeDelta} from \"../utils/time.js\";\nimport generateWords from \"../utils/words.js\";\nimport withSizes from 'react-sizes';\nimport {isMobile} from 'react-device-detect';\n\nconst mapSizesToProps = ({ width }) => ({\n    // How many characters to display to either side of the current char\n    window: width < 600 ? 10: 20,\n  })\n\n class TypingComponent extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {};\n        \n        // Decimal precision for accuracy\n        this.precision = 1;\n        // Text that has been correctly typed\n        this.previousText = \"\";\n        // Upcoming text\n        this.nextText = generateWords(this.props.window * 2);\n        // The current character to be typed\n        this.currentChar = this.nextText.charAt(0);\n        this.nextText = this.nextText.slice(1);\n        // The current typos\n        this.errorText = \"\";\n\n        this.wordCount = 0;\n        this.errors = 0;\n        this.keyPresses = 0;\n        \n        this.startTime = null;\n        this.wpm = \"0\";\n        this.accuracy = (100).toFixed(this.precision);\n        \n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    handleKeyDown(event) {\n        if (!this.startTime) {\n            this.startTime = currentTime();\n        }\n        this.keyPresses++;\n        if (event.key === this.currentChar && this.errorText.length === 0) {\n            if (this.nextText.charAt(0) === \" \") {\n                this.wordCount++;\n            }\n            this.previousText += this.currentChar;\n            this.currentChar = this.nextText.charAt(0);\n            this.nextText = this.nextText.slice(1);\n            if (this.nextText.split(\" \").length <= this.props.window) {\n                this.nextText += ' ' + generateWords(this.props.window);\n            }\n        } else {\n            if (event.key === \"Backspace\" || event.key === \"Delete\") {\n                this.errorText = this.errorText.substring(0, this.errorText.length - 1);\n                this.keyPresses--;\n            } else if (event.key.length === 1) {\n                this.errors++;\n                this.errorText += event.key;\n            }\n        }\n\n        this.wpm = ((this.wordCount / timeDelta(this.startTime)) || 0).toFixed(0);\n        this.accuracy = ((1 - this.errors / this.keyPresses) * 100).toFixed(this.precision);\n        this.setState({});\n    }\n\n    componentDidMount() {\n        document.addEventListener('keydown', this.handleKeyDown);\n    }\n    componentWillUnmount() {\n        document.removeEventListener(\"keydown\", this.handleKeyDown);\n    }\n    \n    render () {\n        const mobileHelper = isMobile ?<p id=\"mobilehelper\">Mobile keyboard not supported.</p>: false;\n        return (\n            <div className=\"typing\">\n                <span id=\"previousText\">{this.previousText.substring(this.previousText.length-(Math.max(this.props.window - this.errorText.length, 0)))\n                    .padStart((Math.max(this.props.window - this.errorText.length, 0)))}</span>\n                <span id=\"errorText\">{this.errorText.slice(-this.props.window)}</span>\n                <span id=\"currentChar\">{this.currentChar}</span>\n                <span id=\"nextText\">{this.nextText.substring(0, this.props.window)}</span>\n                <div id=\"stats\"><span id=\"wpm\"></span><span id=\"accuracy\">{this.accuracy} %</span></div>\n                { mobileHelper }\n            </div>\n        );\n    }\n}\nexport default withSizes(mapSizesToProps)(TypingComponent);\n","import './App.css';\nimport HeaderComponent from './components/HeaderComponent';\nimport TypingComponent from \"./components/TypingComponent.js\";\n\nfunction App() {\n\n  return (\n    <div className=\"App unselectable\">\n      <HeaderComponent/>\n      <TypingComponent />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}